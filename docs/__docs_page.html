<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:300,400,700" rel="stylesheet">
        <style>
            body {
                margin: 0;
                padding: 0;
            }
        </style>
    </head>
    <redoc spec-url='/openapi.json'></redoc>
    <script src="https://cdn.jsdelivr.net/npm/redoc@next/bundles/redoc.standalone.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/insertion-query@1.1.0/insQ.min.js"></script>
    <script>
        function docReady(fn) {
            // see if DOM is already available
            if (document.readyState === "complete" || document.readyState === "interactive") {
                // call on next available tick
                setTimeout(fn, 1);
            } else {
                document.addEventListener("DOMContentLoaded", fn);
            }
        }    

        handled = new Map()

        class TryItOut {
            constructor(el) {
                this.el = el
                console.log("TryItOut", el)
            }
        }

        function handleTryItOut(el) {
            if(el.id in handled) {
                return
            }

            console.log(el.id)

            handled.set(el.id, new TryItOut(el))
        }


        docReady(() => {
            document.querySelectorAll(".try-it-out").forEach(el => {
                handleTryItOut(el)
            });

            insertionQ('.try-it-out').every((el) => {
                handleTryItOut(el)
                //callback
            });
        });
    </script>
</html>